unit URepositorioCadPessoa;

interface

uses
    UCadPessoa
  , UEntidade
  , URepositorioDB
  , SqlExpr
  ;

type
  TRepositorioCadPessoa = class(TRepositorioDB<TCADPESSOA>)
  private

  public
    constructor Create;
    //destructor Destroy; override;

    procedure AtribuiDBParaEntidade(const coCADPESSOA: TCADPESSOA); override;
    procedure AtribuiEntidadeParaDB(const coCADPESSOA: TCADPESSOA;
                                    const coSQLQuery: TSQLQuery); override;
  end;


implementation

uses
    UDM
  , SysUtils
  , StrUtils
  ;

{ TRepositorioCadPessoa }

constructor TRepositorioCADPESSOA.Create;
begin
  Inherited Create(TCADPESSOA, TBL_CAD_PESSOA, FLD_ENTIDADE_ID, STR_CADPESSOA);
end;

{destructor TRepositorioAeroporto.Destroy;
begin
  FreeAndNil(FRepositorioCidade);
  inherited;
end; }

procedure TRepositorioCadPessoa.AtribuiDBParaEntidade(
  const coCADPESSOA: TCADPESSOA);
begin
  inherited;
  with dmProway.SQLSelect do
  begin
    coCADPESSOA.PESSOA_CODIGO        := FieldByName(FLD_PESSOA_CODIGO).AsString;
    coCADPESSOA.PESSOA_NOME          := FieldByName(FLD_PESSOA_NOME).AsString;
    coCADPESSOA.PESSOA_NASCIMENTO    := FieldByName(FLD_PESSOA_NASCIMENTO).AsInteger;
    coCADPESSOA.PESSOA_SEXO          := FieldByName(FLD_PESSOA_SEXO).AsString;
    coCADPESSOA.PESSOA_CPF           := FieldByName(FLD_PESSOA_CPF).AsString;
    coCADPESSOA.PESSOA_RG            := FieldByName(FLD_PESSOA_RG).AsInteger;
    coCADPESSOA.PESSOA_ESTADO        := FieldByName(FLD_PESSOA_ESTADO).AsString;
    coCADPESSOA.PESSOA_CIDADE        := FieldByName(FLD_PESSOA_CIDADE).AsString;
    coCADPESSOA.PESSOA_ENDERECO      := FieldByName(FLD_PESSOA_ENDERECO).AsString;
    coCADPESSOA.PESSOA_TEL_FIXO      := FieldByName(FLD_PESSOA_TEL_FIXO).AsInteger;
    coCADPESSOA.PESSOA_CELULAR       := FieldByName(FLD_PESSOA_CELULAR).AsInteger;
    coCADPESSOA.PESSOA_PAI           := FieldByName(FLD_PESSOA_PAI).AsString;
    coCADPESSOA.PESSOA_MAE           := FieldByName(FLD_PESSOA_MAE).AsString;
  end;
end;

procedure TRepositorioCadPessoa.AtribuiEntidadeParaDB(
  const coCADPESSOA: TCADPESSOA; const coSQLQuery: TSQLQuery);
begin
  inherited;
  with coSQLQuery do
  begin
    ParamByName(FLD_PESSOA_CODIGO).AsString           := coCADPESSOA.PESSOA_CODIGO;
    ParamByName(FLD_PESSOA_NOME).AsString             := coCADPESSOA.PESSOA_NOME;
    ParamByName(FLD_PESSOA_NASCIMENTO).AsInteger      := coCADPESSOA.PESSOA_NASCIMENTO;
    FieldByName(FLD_PESSOA_SEXO).AsString             := coCADPESSOA.PESSOA_SEXO;
    FieldByName(FLD_PESSOA_CPF).AsString              := coCADPESSOA.PESSOA_CPF;
    FieldByName(FLD_PESSOA_RG).AsInteger              := coCADPESSOA.PESSOA_RG;
    FieldByName(FLD_PESSOA_ESTADO).AsString           := coCADPESSOA.PESSOA_ESTADO;
    FieldByName(FLD_PESSOA_CIDADE).AsString           := coCADPESSOA.PESSOA_CIDADE;
    FieldByName(FLD_PESSOA_ENDERECO).AsString         := coCADPESSOA.PESSOA_ENDERECO;
    FieldByName(FLD_PESSOA_TEL_FIXO).AsInteger        := coCADPESSOA.PESSOA_TEL_FIXO;
    FieldByName(FLD_PESSOA_CELULAR).AsInteger         := coCADPESSOA.PESSOA_CELULAR;
    FieldByName(FLD_PESSOA_PAI).AsString              := coCADPESSOA.PESSOA_PAI;
    FieldByName(FLD_PESSOA_MAE).AsString              := coCADPESSOA.PESSOA_MAE;


  end;
end;

end.
