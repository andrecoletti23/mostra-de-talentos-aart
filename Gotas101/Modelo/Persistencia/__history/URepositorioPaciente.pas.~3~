unit URepositorioPaciente;

interface

uses
    UPaciente
  , UEntidade
  , URepositorioDB
  , SqlExpr
  ;

type
  TRepositorioPaciente = class(TRepositorioDB<TPACIENTE>)
  private

  public
    constructor Create;
    //destructor Destroy; override;

    procedure AtribuiDBParaEntidade(const coPACIENTE: TPACIENTE); override;
    procedure AtribuiEntidadeParaDB(const coPACIENTE: TPACIENTE;
                                    const coSQLQuery: TSQLQuery); override;
  end;


implementation

uses
    UDM
  , SysUtils
  , StrUtils
  ;

{ TRepositorioPACIENTE }

constructor TRepositorioPACIENTE.Create;
begin
  Inherited Create(TPACIENTE, TBL_PACIENTE, FLD_ENTIDADE_ID, STR_PACIENTE);
end;

{destructor TRepositorioAeroporto.Destroy;
begin
  FreeAndNil(FRepositorioCidade);
  inherited;
end; }

procedure TRepositorioPACIENTE.AtribuiDBParaEntidade(
  const coPACIENTE: TPACIENTE);
begin
  inherited;
  with dmProway.SQLSelect do
    begin
      coPACIENTE.PESSOA_CODIGO        := FieldByName(FLD_PESSOA_CODIGO).AsString;
      coPACIENTE.PESSOA_NOME          := FieldByName(FLD_PESSOA_NOME).AsString;
      coPACIENTE.PESSOA_NASCIMENTO    := FieldByName(FLD_PESSOA_NASCIMENTO).AsInteger;
      coPACIENTE.PESSOA_SEXO          := FieldByName(FLD_PESSOA_SEXO).AsString;
      coPACIENTE.PESSOA_CPF           := FieldByName(FLD_PESSOA_CPF).AsString;
      coPACIENTE.PESSOA_RG            := FieldByName(FLD_PESSOA_RG).AsInteger;
      coPACIENTE.PESSOA_ESTADO        := FieldByName(FLD_PESSOA_ESTADO).AsString;
      coPACIENTE.PESSOA_CIDADE        := FieldByName(FLD_PESSOA_CIDADE).AsString;
      coPACIENTE.PESSOA_ENDERECO      := FieldByName(FLD_PESSOA_ENDERECO).AsString;
      coPACIENTE.PESSOA_TEL_FIXO      := FieldByName(FLD_PESSOA_TEL_FIXO).AsInteger;
      coPACIENTE.PESSOA_CELULAR       := FieldByName(FLD_PESSOA_CELULAR).AsInteger;
      coPACIENTE.PESSOA_PAI           := FieldByName(FLD_PESSOA_PAI).AsString;
      coPACIENTE.PESSOA_MAE           := FieldByName(FLD_PESSOA_MAE).AsString;
    end;
end;

procedure TRepositorioPACIENTE.AtribuiEntidadeParaDB(
  const coPACIENTE: TPACIENTE; const coSQLQuery: TSQLQuery);
begin
  inherited;
  with coSQLQuery do
  begin
    ParamByName(FLD_PESSOA_CODIGO).AsString           := coPACIENTE.PESSOA_CODIGO;
    ParamByName(FLD_PESSOA_NOME).AsString             := coPACIENTE.PESSOA_NOME;
    ParamByName(FLD_PESSOA_NASCIMENTO).AsInteger      := coPACIENTE.PESSOA_NASCIMENTO;
    ParamByName(FLD_PESSOA_SEXO).AsString             := coPACIENTE.PESSOA_SEXO;
    ParamByName(FLD_PESSOA_CPF).AsString              := coPACIENTE.PESSOA_CPF;
    ParamByName(FLD_PESSOA_RG).AsInteger              := coPACIENTE.PESSOA_RG;
    ParamByName(FLD_PESSOA_ESTADO).AsString           := coPACIENTE.PESSOA_ESTADO;
    ParamByName(FLD_PESSOA_CIDADE).AsString           := coPACIENTE.PESSOA_CIDADE;
    ParamByName(FLD_PESSOA_ENDERECO).AsString         := coPACIENTE.PESSOA_ENDERECO;
    ParamByName(FLD_PESSOA_TEL_FIXO).AsInteger        := coPACIENTE.PESSOA_TEL_FIXO;
    ParamByName(FLD_PESSOA_CELULAR).AsInteger         := coPACIENTE.PESSOA_CELULAR;
    ParamByName(FLD_PESSOA_PAI).AsString              := coPACIENTE.PESSOA_PAI;
    ParamByName(FLD_PESSOA_MAE).AsString              := coPACIENTE.PESSOA_MAE;
  end;
end;

end.
